import{c as S,r as s,b as f,e as A,j as e,L as C,f as E}from"./index-Cetsh7Il.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],M=S("store",L);function I({open:c,onClose:o,onSuccess:m}){const[a,i]=s.useState("login"),[u,x]=s.useState(""),[l,g]=s.useState(""),[d,h]=s.useState(""),[b,p]=s.useState(!1),[N,{loading:v}]=f(C),[y,{loading:k}]=f(E);if(s.useEffect(()=>{c||(i("login"),x(""),g(""),h(""),p(!1))},[c]),!c)return null;const j=A();async function w(t){t.preventDefault();try{if(a==="login"){const{data:r}=await N({variables:{email:l,password:d}}),n=r?.loginUser?.user;await j.resetStore(),m?.({mode:"login",userName:n?.name||l,user:n})}else{const{data:r}=await y({variables:{name:u,email:l,password:d}}),n=r?.registerUser?.user;await j.resetStore(),m?.({mode:"register",wantsSeller:b,userName:n?.name||u||l,user:n})}o?.()}catch(r){console.error(r)}}return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:o}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl p-6 z-10",style:{background:"#111115"},role:"dialog","aria-modal":"true","aria-label":a==="login"?"Login":"Create Account",children:[e.jsx("button",{className:"absolute top-3 right-3 cursor-pointer",onClick:o,"aria-label":"Close",children:"âœ•"}),e.jsxs("header",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-display text-amber-100",children:a==="login"?"Welcome Back":"Create Account"}),e.jsx("p",{className:"text-amber-200/70",children:a==="login"?"Login to access your account":"Join our marketplace today"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a==="register"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-amber-200/80 mb-1",children:"Full Name"}),e.jsx("input",{className:"w-full px-3 py-2 rounded-lg text-amber-100 focus:outline-none",style:{background:"#2c2c30"},value:u,onChange:t=>x(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-amber-200/80 mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded-lg text-amber-100 focus:outline-none",style:{background:"#2c2c30"},value:l,onChange:t=>g(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-amber-200/80 mb-1",children:"Password"}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-lg text-amber-100 focus:outline-none",style:{background:"#2c2c30"},value:d,onChange:t=>h(t.target.value),required:!0})]}),a==="register"&&e.jsxs("div",{className:"rounded-xl p-3 flex items-start gap-3",style:{background:"black"},children:[e.jsx("input",{id:"wants-seller",type:"checkbox",checked:b,onChange:t=>p(t.target.checked),className:"mt-1 accent-amber-500"}),e.jsxs("label",{htmlFor:"wants-seller",className:"flex-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-100",children:[e.jsx(M,{className:"h-5 w-5 text-white"}),e.jsx("span",{className:"font-medium",children:"I want to sell products"})]}),e.jsx("p",{className:"text-amber-200/70 text-sm ml-7",children:"Setup your seller account after registration"})]})]}),e.jsx("button",{type:"submit",disabled:v||k,className:"w-full mt-1 py-3 rounded-xl text-white cursor-pointer",style:{background:"#3E2F16"},children:a==="login"?"Login":"Create Account"})]}),e.jsx("p",{className:"mt-4 text-center text-sm text-amber-200/70",children:a==="login"?e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx("button",{className:"underline cursor-pointer",onClick:()=>i("register"),children:"Sign up"})]}):e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx("button",{className:"underline cursor-pointer",onClick:()=>i("login"),children:"Login"})]})})]})]})}export{I as AuthModal};
